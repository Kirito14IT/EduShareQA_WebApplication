# QQ邮箱验证码发送配置指南

## 前置准备

### 1. 开启QQ邮箱SMTP服务

1. 登录QQ邮箱网页版：https://mail.qq.com
2. 点击右上角设置图标 → 账户
3. 找到"SMTP服务"，点击开启
4. 按照提示发送短信验证并开启服务
5. 生成授权码（不是QQ密码！）

### 2. 获取授权码

1. 在SMTP服务开启后，系统会提供一个16位授权码
2. **重要**：保存好这个授权码，它将用于代替QQ密码进行邮件发送

## 配置步骤

### 1. 环境变量配置

在系统环境变量中设置以下变量：

```bash
# Windows环境变量设置
MAIL_USERNAME=你的QQ邮箱@qq.com
MAIL_PASSWORD=你的16位授权码
```

或者在运行应用时作为JVM参数：

```bash
java -jar target/edushareqa-backend-1.0.0.jar \
  -DMAIL_USERNAME=你的QQ邮箱@qq.com \
  -DMail_PASSWORD=你的16位授权码
```

### 2. 配置文件方式

也可以直接修改 `application.yml` 或 `application-dev.yml`：

```yaml
spring:
  mail:
    username: 你的QQ邮箱@qq.com
    password: 你的16位授权码
```

## 测试发送

配置完成后，重启应用，然后测试忘记密码功能：

1. 访问登录页面
2. 点击"忘记密码？"
3. 输入注册时使用的邮箱
4. 点击"发送验证码"
5. 检查邮箱是否收到验证码邮件

## 故障排除

### 1. 连接超时
- 检查网络连接
- 确认QQ邮箱SMTP服务已开启
- 验证授权码是否正确

### 2. 认证失败
- 确认使用的是16位授权码，不是QQ密码
- 检查邮箱地址是否正确
- 确认SMTP服务已开启

### 3. 邮件被拦截
- 检查垃圾邮件箱
- 添加 EduShareQA 到白名单
- 确认发件人邮箱配置正确

## 安全提醒

- **不要将授权码提交到代码仓库**
- **定期更换授权码**
- **授权码泄露后及时重新生成**
- **使用环境变量而不是硬编码配置**

## 邮件内容示例

```
主题：EduShareQA 密码重置验证码

亲爱的EduShareQA用户：

您正在进行密码重置操作。

您的验证码是：123456

验证码有效期为15分钟，请及时完成密码重置。

如果这不是您本人的操作，请忽略此邮件。

EduShareQA团队
```
